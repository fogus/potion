{"version":1,"ops":[{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381444757,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MDk3Njc4","github-url":"https://github.com/perl11/potion/issues/52#issuecomment-26097678"},"message":"What is missing is the recalculation of relative jumps, dependent on the size of the new ASM_MOV_EBP, 5 or 2.","files":null},{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381446688,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MDk5NTUw","github-url":"https://github.com/perl11/potion/issues/52#issuecomment-26099550"},"message":"Latest udis86 has the signed mem offset problem for offset sizes\u003e1byte fixed.\n\nBTW: the needed udis86 fix for 1.7 was\n\n```\ndiff --git a/libudis86/syn-att.c b/libudis86/syn-att.c\nindex 7a7fc7c..f8d703e 100644\n--- a/libudis86/syn-att.c\n+++ b/libudis86/syn-att.c\n@@ -64,10 +64,16 @@ gen_operand(struct ud* u, struct ud_operand* op)\n                                mkasm(u, \"-0x%x\", (-op-\u003elval.sbyte) \u0026 0xff);\n                        else    mkasm(u, \"0x%x\", op-\u003elval.sbyte);\n                } \n-               else if (op-\u003eoffset == 16) \n-                       mkasm(u, \"0x%x\", op-\u003elval.uword);\n-               else if (op-\u003eoffset == 32) \n-                       mkasm(u, \"0x%lx\", op-\u003elval.udword);\n+               else if (op-\u003eoffset == 16) {\n+                        if (op-\u003elval.sword \u003c 0) /* rurban: large negative offsets */\n+                                mkasm(u, \"-0x%x\", (-op-\u003elval.sword) \u0026 0xffff);\n+                       else    mkasm(u, \"0x%x\", op-\u003elval.sword);\n+                }\n+               else if (op-\u003eoffset == 32) {\n+                        if (op-\u003elval.sdword \u003c 0) /* rurban: large negative offsets */\n+                                mkasm(u, \"-0x%lx\", (-op-\u003elval.sdword) \u0026 0xffff);\n+                       else    mkasm(u, \"0x%lx\", op-\u003elval.udword);\n+                }\n                else if (op-\u003eoffset == 64) \n                        mkasm(u, \"0x\" FMT64 \"x\", op-\u003elval.uqword);\n\n```","files":null},{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381511263,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MTUzODI0","github-url":"https://github.com/perl11/potion/issues/52#issuecomment-26153824"},"message":"And this patch improves gdb readbility: https://sourceware.org/ml/gdb-patches/2013-10/msg00393.html","files":null},{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381521981,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MTY4MDMz","github-url":"https://github.com/perl11/potion/issues/52#issuecomment-26168033"},"message":"There are 3 more cases of such possible overflows (15: 64bit, 31: 32bit)\n- potion_x86_upvals: upc \u003e 15\n- potion_x86_method: (lregs + opp.b) \u003e 15/31 and upc \u003e 15/31","files":null},{"type":4,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381523354,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50Njk5NTY5NTc="},"status":2}]}