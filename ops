{"version":1,"ops":[{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381422423,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MDY4NzMy","github-url":"https://github.com/perl11/potion/issues/13#issuecomment-26068732"},"message":"Not a bug. ctor vs object.\n\nTry this:\n\n```\n$ bin/potion -Dt -e'Object()\nObject\nObject()\nObject()!=Object'\n-- run-time --\n[ 1] self     1     ; Lobby\n[ 2] loadk    0 0   ; Object\n[ 3] msg      0 1   ; Object\n[ 4] call     0 1   ; \u003cObject 7ffca42d26d8\u003e\n[ 5] self     1     ; Lobby\n[ 6] loadk    0 0   ; Object\n[ 7] bind     0 1   ; function Object()\n[ 8] loadpn   2 0   ; nil\n[ 9] call     0 2   ; Object\n[10] self     1     ; Lobby\n[11] loadk    0 0   ; Object\n[12] msg      0 1   ; Object\n[13] call     0 1   ; \u003cObject 7ffca42d2860\u003e\n[14] self     1     ; Lobby\n[15] loadk    0 0   ; Object\n[16] msg      0 1   ; Object\n[17] call     0 1   ; \u003cObject 7ffca42d2948\u003e\n[18] self     2     ; Lobby\n[19] loadk    1 0   ; Object\n[20] bind     1 2   ; function Object()\n[21] loadpn   3 0   ; nil\n[22] call     1 3   ; Object\n[23] neq      0 1   ; \u003cObject 7ffca42d2948\u003e!=Object ; true\n[24] return   0     ; true\n```\n\nWith -Dvt even more.\n\nObject() creates a new Object instance, it is the ctor (\"constructor\").\nThat's the first VTABLE path in OP_CALL in the vm, calling potion_object_new(), and then falling thru to the 2nd closure path.\n\nObject returns the current Object.\nThat's running only the second CLOSURE path in OP_CALL in the vm, just calling the \nclosure without creating a new object.","files":null},{"type":4,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381422423,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50Njk2OTM1ODU="},"status":2}]}