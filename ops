{"version":1,"ops":[{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1445248348,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0OTE3MDE2MQ==","github-url":"https://github.com/perl11/potion/issues/86#issuecomment-149170161"},"message":"Oh, so apple bumped the clang version without supporting the overflow builtins?\nWhat is your `__clang_minor__` version on this? \n\n```\nclang -dM -E -x c /dev/null | grep __clang_\n```\n\nI assumed 3.4 added this, as documented in http://llvm.org/releases/3.4/tools/clang/docs/LanguageExtensions.html#builtin-functions\nbut apparently apple has a different idea how to number their clang.\n\n```\n$ /usr/bin/clang -dM -E -x c /dev/null | grep __clang_\n#define __clang__ 1\n#define __clang_major__ 7\n#define __clang_minor__ 0\n#define __clang_patchlevel__ 0\n#define __clang_version__ \"7.0.0 (clang-700.0.72)\"\n```","files":null},{"type":3,"author":{"id":"656bd7ecbd81d01fcbc8d3eec515e15dcc0426eb"},"timestamp":1445253950,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0OTE4ODg3Nw==","github-url":"https://github.com/perl11/potion/issues/86#issuecomment-149188877"},"message":"Now upgraded Xcode command line tools to 6.2, but the same compile errors. Didn't manage to upgrade Xcode, still 5.0.2. Seems you have Yosemite and Xcode 7.\n\n```\n$ clang -dM -E -x c /dev/null | grep __clang_\n#define __clang__ 1\n#define __clang_major__ 5\n#define __clang_minor__ 0\n#define __clang_patchlevel__ 0\n#define __clang_version__ \"5.0 (clang-500.2.79)\"\n```\n\nThx, your patch works, just throws warnings now:\n\n```\n  CC       src/unix/libuv_la-stream.lo\nsrc/unix/stream.c:1054:19: warning: variable length array folded to constant array as an extension\n      [-Wpedantic]\n  char cmsg_space[CMSG_SPACE(UV__CMSG_FD_SIZE)];\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/usr/include/sys/socket.h:517:24: note: expanded from macro 'CMSG_SPACE'\n#define CMSG_SPACE(l)           (__DARWIN_ALIGN32(sizeof(struct cmsghdr)) + __DARWIN_ALIGN32(l))\n                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsrc/unix/stream.c:1054:19: note: cast which performs the conversions of a reinterpret_cast is not allowed in\n      a constant expression\n/usr/include/sys/socket.h:517:25: note: expanded from macro 'CMSG_SPACE'\n#define CMSG_SPACE(l)           (__DARWIN_ALIGN32(sizeof(struct cmsghdr)) + __DARWIN_ALIGN32(l))\n                                 ^\n/usr/include/i386/_param.h:43:42: note: expanded from macro '__DARWIN_ALIGN32'\n#define       __DARWIN_ALIGN32(p)       ((__darwin_size_t)((char *)(__darwin_size_t)(p) + __DARWIN_AL...\n                                         ^\n1 warning generated.\n```","files":null},{"type":3,"author":{"id":"656bd7ecbd81d01fcbc8d3eec515e15dcc0426eb"},"timestamp":1445254785,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0OTE5MDgzOQ==","github-url":"https://github.com/perl11/potion/issues/86#issuecomment-149190839"},"message":"I close this issue, hope you agree.\n\nBTW: It's really, really fast.","files":null},{"type":4,"author":{"id":"656bd7ecbd81d01fcbc8d3eec515e15dcc0426eb"},"timestamp":1445254785,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDM5MDI0NjE5"},"status":2},{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1445257255,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0OTE5ODc0Nw==","github-url":"https://github.com/perl11/potion/issues/86#issuecomment-149198747"},"message":"Great so 7 is the right number then. Have to fix cperl now also","files":null}]}