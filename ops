{"version":1,"ops":[{"type":3,"author":{"id":"64f4edd84cdc3e297b831d5e2a9a6132f16643da"},"timestamp":1256650441,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2Njkx","github-url":"https://github.com/perl11/potion/issues/1#issuecomment-66691"},"message":"Tracking this to a missing __WORDSIZE definition on snow leopard. The following (nasty hack) fixes it, (So it builds and passes the test suite)\n\n\u003cpre\u003e\n--- a/core/internal.h\n+++ b/core/internal.h\n@@ -6,6 +6,11 @@\n #ifndef POTION_INTERNAL_H\n #define POTION_INTERNAL_H\n \n+#ifndef __WORDSIZE\n+#warning \"__WORDSIZE is not defined! Arbitrarily defining as 64 bit.\"\n+#define __WORDSIZE 64\n+#endif\n+\n struct Potion_State;\n \n typedef unsigned char u8;\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"64f4edd84cdc3e297b831d5e2a9a6132f16643da"},"timestamp":1256652846,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzA0","github-url":"https://github.com/perl11/potion/issues/1#issuecomment-66704"},"message":"Here is a cleaner, and more appropriately formatted patch.\n\n\u003cpre\u003e\nFrom ab5b2d761ac9ee633ae4b9aa15a0fdab60637918 Mon Sep 17 00:00:00 2001\nFrom: Joe \u003cjoe@Zahir.local\u003e\nDate: Tue, 27 Oct 2009 10:12:34 -0400\nSubject: [PATCH] Patching __WORDSIZE where it is not defined, and we can make a reasonable guess from __LP64__ (as is the case with Mac OS X Snow Leopard)\n\n---\n core/potion.h |    8 ++++++++\n 1 files changed, 8 insertions(+), 0 deletions(-)\n\ndiff --git a/core/potion.h b/core/potion.h\nindex e5271bf..9a22266 100644\n--- a/core/potion.h\n+++ b/core/potion.h\n@@ -43,6 +43,14 @@ struct PNCont;\n struct PNMemory;\n struct PNVtable;\n \n+#ifndef __WORDSIZE\n+#ifdef __LP64__\n+#define __WORDSIZE 64\n+#else /* ! __LP64__ */\n+#define __WORDSIZE 32\n+#endif\n+#endif\n+\n #define PN_TNIL         0x250000\n #define PN_TNUMBER      (1+PN_TNIL)\n #define PN_TBOOLEAN     (2+PN_TNIL)\n-- \n1.5.5.1\n\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"9a11631053ba12c8f60bdf65d675322fe7c9a8c5"},"timestamp":1256654136,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzIy","github-url":"https://github.com/perl11/potion/issues/1#issuecomment-66722"},"message":"Thanks joeatwork.  Works like a charm.","files":null},{"type":3,"author":{"id":"64f4edd84cdc3e297b831d5e2a9a6132f16643da"},"timestamp":1256654830,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzM1","github-url":"https://github.com/perl11/potion/issues/1#issuecomment-66735"},"message":"Woohoo! My first patch! Glad I could help!","files":null},{"type":3,"author":{"id":"585e3c9e8787b1212cb270ac94edd52a07b700dd"},"timestamp":1287546291,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ4MDExOA==","github-url":"https://github.com/perl11/potion/issues/1#issuecomment-480118"},"message":"This was not needed.  The compiler just needs to be passed -mstackrealign\n\nSee: http://github.com/wmoxam/potion/commit/f6c53544f557822cb151384f428b2ffd7f6d5ec3","files":null}]}