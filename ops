{"version":1,"ops":[{"type":3,"author":{"id":"d7e892ae138315218055d7503c6168f141080ff1"},"timestamp":1366299178,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE2NTgzNzEy","github-url":"https://github.com/perl11/potion/issues/23#issuecomment-16583712"},"message":"Also here on Ubuntu. :(","files":null},{"type":3,"author":{"id":"3092d7248599f9179af38e11035a7f3f41fbc469"},"timestamp":1382426258,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2NzgxODM0","github-url":"https://github.com/perl11/potion/issues/23#issuecomment-26781834"},"message":"I think it's not only user-defined functions. If I enter \"a = 1+2\" in the REPL, I get the value 3 back, but if I then type just \"a\", I get nil.\nI get this both with OSX 10.6.8 and 10.8.5.\n\n```\n$ bin/potion \n\u003e\u003e a=1+2\n=\u003e 3\n\u003e\u003e a\n=\u003e nil\n\u003e\u003e \n```","files":null},{"type":3,"author":{"id":"f5389787b0f1097f5f8f1e016c3f30d9dd053bb2"},"timestamp":1382622866,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2OTkzNzkw","github-url":"https://github.com/perl11/potion/issues/23#issuecomment-26993790"},"message":"@jkleiser It seems as if all user-defined values are nil. It's a considerably serious issue considering it renders the language pretty unusable.","files":null},{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1382638800,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI3MDE2Nzkz","github-url":"https://github.com/perl11/potion/issues/23#issuecomment-27016793"},"message":"@beakr Only in the repl, not in scripts. The repl is similar to the debugger pretty limited yet.","files":null},{"type":3,"author":{"id":"6c4ce90c60e1731e26a10063255a855b265dc6e4"},"timestamp":1445073904,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0ODg5ODUwOQ==","github-url":"https://github.com/perl11/potion/issues/23#issuecomment-148898509"},"message":"Hi @rurban\n\nThis is due to the way the repl works.\n\nEach line is executed as its own block/closure, with its own local variables, which go out of scope when the block has finished executing.\n\nAny variable that doesn't start with uppercase is considered local to the block. If you use uppercase variable names, they are treated as globals, and are available to the next block that is executed.\n\nTo fix this, we would need to change the way the repl works, to execute the expression(s) contained in the block, rather than the block itself.\n\nThis would require changes to the potion_eval function, with probably a lot of other changes to surrounding code, including potion_source_compile, which will refuse to compile a bare expression.","files":null},{"type":3,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1445074307,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE0ODg5ODc5NQ==","github-url":"https://github.com/perl11/potion/issues/23#issuecomment-148898795"},"message":"yes, the repl is very limited. @robotii 's analysis is correct, eval cannot be used for the repl, or eval needs an optional env argument to track the local environment, as in a real lisp.\n\nI'm working on it in the branch `cl_eval`","files":null}]}