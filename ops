{"version":1,"ops":[{"type":1,"author":{"id":"dc8a501266912e06a2fdd3f9cafe05d1338b8aad"},"timestamp":1381420094,"metadata":{"github-id":"MDU6SXNzdWUyMDgxNjA5OQ==","github-url":"https://github.com/perl11/potion/issues/52","origin":"github"},"title":"jit-x86: fix num of register limitation","message":"On amd64 we could only address 15 local or upval vars via -n(%rpb),\non i386 max. 30 local or upval vars.\n\nThis limitation is now lifted by adding ASM_MOV_EBP() which checks\nfor the %ebp offset at compile-time and uses the word size insn if needed, \ninstead of the byte size insn before, which overflowed at 128.\n\n```\n#define ASM_MOV_EBP(op, reg)\n  if (reg \u003e 15) { ASM(op+0x40); ASMI(RBPN(reg)); }\n  else { ASM(op); ASM(RBP(reg)); }\n```\n\nBut it still doesn't work.","files":null}]}