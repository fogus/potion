{"version":1,"ops":[{"type":1,"author":{"id":"e862acab78923d0333af14df3ccee9c7e14880e7"},"timestamp":1286482643,"metadata":{"github-id":"MDU6SXNzdWUzNTIwMzc=","github-url":"https://github.com/perl11/potion/issues/5","origin":"github"},"title":"potion_bytes_obj_string and other functions modifying unrelated data","message":"Imagine if you added the following code between lines 43 and 44 of [http://github.com/orangea/potion/blob/1660fdf88bf9ee4cc8340187b28814aafb116681/core/file.c](This file):\n\n```\nprintf(\"%lx\\n\", ((struct PNFile *)self)-\u003epath);\nPN x = potion_byte_str(P, \"\");\nprintf(\"%lx\\n\", ((struct PNFile *)self)-\u003epath);\npotion_bytes_obj_string(P, x, self);\nprintf(\"%lx\\n\", ((struct PNFile *)self)-\u003epath);\n```\n\nThe printfs should always print the same thing, but they don't. I added those lines and then ran\n\n```\nFile('a_valid_filename_here', 'r')\n```\n\nHere is the output on my computer:\n\n```\n100073870\n2e4a226e0025000c\n2e4a226e0025000c\n```\n\nSometimes `potion_bytes_obj_string` will modify the data too. I think that this might have something to do with either a bug in file.c or the GC not handling the File class correctly.","files":null}]}